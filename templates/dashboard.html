<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Golden Turf Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
    <div class="sidebar" style="position: fixed; top: 0; left: 0; width: 200px; height: 100%; background-color: #006400; color: white;">
        <div style="width:100%;text-align:center;margin-bottom:20px;">
            <img src="/static/golden_turf_logo.png" alt="Golden Turf Logo" style="width:100px;display:block;margin:0 auto;">
        </div>
        <h2 style="color: orange;">Golden Turf</h2>
        <nav class="navbar">
            <a href="{{ url_for('dashboard') }}" style="color: white; font-size: 16px; text-decoration: none; display: block; padding: 10px;">Dashboard</a>
            <div class="nav-dropdown">
                <a href="#" class="dropbtn" style="color: white; font-size: 16px; text-decoration: none; display: block; padding: 10px;">Products</a>
                <div class="dropdown-content">
                    <a href="{{ url_for('products_list') }}" style="color: white; font-size: 16px; text-decoration: none; display: block; padding: 10px;">Products List</a>
                    <a href="{{ url_for('invoice') }}" style="color: white; font-size: 16px; text-decoration: none; display: block; padding: 10px;">Invoice Form</a>
                    <a href="{{ url_for('clients') }}" style="color: white; font-size: 16px; text-decoration: none; display: block; padding: 10px;">Client Details Form</a>
                </div>
            </div>
            <a href="{{ url_for('quotes') }}" style="color: white; font-size: 16px; text-decoration: none; display: block; padding: 10px;">Quotes</a>
            <a href="{{ url_for('payments') }}" style="color: white; font-size: 16px; text-decoration: none; display: block; padding: 10px;">Payments</a>
            <a href="{{ url_for('calendar') }}" style="color: white; font-size: 16px; text-decoration: none; display: block; padding: 10px;">Calendar</a>
        </nav>
    </div>
    <div class="main-content">
        <h1>Golden Turf Dashboard</h1>

        <div class="kpi-grid">
            <div class="kpi-tile green">
                <div class="kpi-label">Total Clients</div>
                <div class="kpi-value">{{ total_clients }}</div>
            </div>
            <div class="kpi-tile green">
                <div class="kpi-label">Yesterday Sales ($)</div>
                <div class="kpi-value">{{ "{:,.2f}".format(yesterday_sales) }}</div>
            </div>
            <div class="kpi-tile orange">
                <div class="kpi-label">Total Services</div>
                <div class="kpi-value">{{ total_services }}</div>
            </div>
            <div class="kpi-tile green">
                <div class="kpi-label">Today Sales ($)</div>
                <div class="kpi-value">{{ "{:,.2f}".format(today_sales) }}</div>
            </div>
            <div class="kpi-tile green">
                <div class="kpi-label">Last 7 Days Sales ($)</div>
                <div class="kpi-value">{{ "{:,.2f}".format(last_7_days_sales) }}</div>
            </div>
            <div class="kpi-tile orange">
                <div class="kpi-label">Total Sales ($)</div>
                <div class="kpi-value">{{ "{:,.2f}".format(total_sales) }}</div>
            </div>
        </div>

        {% if overdue_jobs %}
        <div class="alerts">
            <div class="alert-title">Overdue Jobs:</div>
            {% for job in overdue_jobs %}
                <div class="alert-item">{{ job.client_name }} was due on {{ job.job_date }}</div>
            {% endfor %}
        </div>
        {% endif %}

        {% if user_role == 'admin' or user_role == 'owner' %}
        <div class="admin-buttons">
            <button onclick="alert('Add Job clicked')">Add Job</button>
            <button onclick="alert('Generate Quote clicked')">Generate Quote</button>
            <button onclick="window.location.href='/calendar';">View Calendar</button>
        </div>
        {% endif %}

        <footer>
        </footer>
    </div>
</body>
</html>
