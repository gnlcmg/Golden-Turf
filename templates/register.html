<!DOCTYPE html>
<!--
    File: register.html
    Purpose: User registration interface for Golden Turf
    Dependencies: login.css, Flask form handling
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Golden Turf</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='login.css') }}">
    
    <!-- Registration Form Enhancements -->
    <style>
        /* Input validation styling */
        .input_validation_error {
            border-color: #dc3545 !important;
            box-shadow: 0 0 5px rgba(220, 53, 69, 0.3);
        }
        
        .input_validation_success {
            border-color: #28a745 !important;
            box-shadow: 0 0 5px rgba(40, 167, 69, 0.3);
        }
        
        /* Error message styling */
        .validation_error_message {
            color: #dc3545;
            font-size: 12px;
            margin-top: -10px;
            margin-bottom: 10px;
            display: block;
        }
        
        /* Form transition effects */
        .input-group input {
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        
        /* Button loading state */
        .btn_loading {
            opacity: 0.7;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <!-- Main Registration Container -->
    <div id="main_registration_container" class="container">
        <!-- Left Branding Panel -->
        <div class="left-panel" id="div_branding_panel">
            <header class="logo" id="header_company_logo">
                <span class="golden">GOLDEN</span><span class="turf">TURF</span>
            </header>
        </div>
        
        <!-- Right Registration Panel -->
        <div class="right-panel" id="div_registration_panel">
            <h1 id="h1_registration_title">Register</h1>
            
            <!-- Registration Form -->
            <form action="{{ url_for('register') }}" method="POST" autocomplete="off" 
                  id="frm_user_registration" novalidate>
                <div class="input-group" id="div_name_input">
                    <input type="text" name="name" id="txt_user_name" placeholder="NAME" 
                           data-validation="required" 
                           data-field-type="text"
                           data-min-length="2"
                           required>
                    <span class="validation_error_message" id="span_name_error" style="display: none;"></span>
                </div>
                
                <div class="input-group" id="div_email_input">
                    <input type="email" name="email" id="txt_user_email" placeholder="EMAIL" 
                           data-validation="email"
                           data-field-type="email"
                           required>
                    <span class="validation_error_message" id="span_email_error" style="display: none;"></span>
                </div>
                
                <div class="input-group" id="div_password_input">
                    <input type="password" name="password" id="pwd_user_password" placeholder="PASSWORD" 
                           data-validation="password"
                           data-field-type="password"
                           data-min-length="6"
                           required>
                    <span class="validation_error_message" id="span_password_error" style="display: none;"></span>
                </div>
                
                <button type="submit" class="btn-login" id="btn_register_user">REGISTER</button>
            </form>
            
            <!-- Login Navigation Link -->
            <div class="login-link" id="div_login_navigation">
                Already have an account? <a href="{{ url_for('login') }}" id="lnk_existing_login">Login</a>
            </div>
        </div>
    </div>

    <!-- Registration Validation Script -->
    <script>
        /**
         * Registration Form Validation Module
         * Purpose: Client-side validation for user registration
         * Naming: camelCase functions, Hungarian notation DOM elements
         */

        // Module Constants (UPPER_SNAKE_CASE naming convention)
        const MIN_NAME_LENGTH = 2;
        const MAX_NAME_LENGTH = 50;
        const MIN_PASSWORD_LENGTH = 6;
        const MAX_PASSWORD_LENGTH = 128;
        const EMAIL_REGEX = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        // DOM Element References (Hungarian notation)
        const txtUserName = document.getElementById('txt_user_name');
        const txtUserEmail = document.getElementById('txt_user_email');
        const pwdUserPassword = document.getElementById('pwd_user_password');
        const btnRegisterUser = document.getElementById('btn_register_user');
        const frmRegistration = document.getElementById('frm_user_registration');

        // Error message elements
        const spanNameError = document.getElementById('span_name_error');
        const spanEmailError = document.getElementById('span_email_error');
        const spanPasswordError = document.getElementById('span_password_error');

        /**
         * Name Validation Function
         * Purpose: Validates user name input for length and content
         * @param {string} strName - Name string to validate
         * @returns {object} Validation result with isValid boolean and message
         */
        function validateUserName(strName) {
            // Existence check
            if (!strName || typeof strName !== 'string') {
                return { isValid: false, message: 'Name is required' };
            }

            const strTrimmedName = strName.trim();

            // Length checks (range validation)
            if (strTrimmedName.length < MIN_NAME_LENGTH) {
                return { isValid: false, message: `Name must be at least ${MIN_NAME_LENGTH} characters` };
            }
            if (strTrimmedName.length > MAX_NAME_LENGTH) {
                return { isValid: false, message: `Name cannot exceed ${MAX_NAME_LENGTH} characters` };
            }

            // Content validation - basic character check
            const regexValidName = /^[a-zA-Z\s'-]+$/;
            if (!regexValidName.test(strTrimmedName)) {
                return { isValid: false, message: 'Name can only contain letters, spaces, hyphens and apostrophes' };
            }

            return { isValid: true, message: '' };
        }

        /**
         * Email Validation Function
         * Purpose: Validates email format and structure
         * @param {string} strEmail - Email string to validate
         * @returns {object} Validation result with isValid boolean and message
         */
        function validateUserEmail(strEmail) {
            // Existence check
            if (!strEmail || typeof strEmail !== 'string') {
                return { isValid: false, message: 'Email is required' };
            }

            const strTrimmedEmail = strEmail.trim().toLowerCase();

            // Format validation (type check)
            if (!EMAIL_REGEX.test(strTrimmedEmail)) {
                return { isValid: false, message: 'Please enter a valid email address' };
            }

            // Length validation
            if (strTrimmedEmail.length > 254) {
                return { isValid: false, message: 'Email address is too long' };
            }

            return { isValid: true, message: '' };
        }

        /**
         * Password Validation Function
         * Purpose: Validates password strength and requirements
         * @param {string} strPassword - Password string to validate
         * @returns {object} Validation result with isValid boolean and message
         */
        function validateUserPassword(strPassword) {
            // Existence check
            if (!strPassword || typeof strPassword !== 'string') {
                return { isValid: false, message: 'Password is required' };
            }

            // Length checks (range validation)
            if (strPassword.length < MIN_PASSWORD_LENGTH) {
                return { isValid: false, message: `Password must be at least ${MIN_PASSWORD_LENGTH} characters` };
            }
            if (strPassword.length > MAX_PASSWORD_LENGTH) {
                return { isValid: false, message: `Password cannot exceed ${MAX_PASSWORD_LENGTH} characters` };
            }

            // Basic strength validation
            const blnHasLetter = /[a-zA-Z]/.test(strPassword);
            const blnHasNumber = /[0-9]/.test(strPassword);
            
            if (!blnHasLetter) {
                return { isValid: false, message: 'Password must contain at least one letter' };
            }

            return { isValid: true, message: '' };
        }

        /**
         * Validation Error Display Function
         * Purpose: Shows validation error for specific field
         * @param {HTMLElement} inputElement - Input field element
         * @param {HTMLElement} errorElement - Error message element
         * @param {string} strMessage - Error message to display
         */
        function showValidationError(inputElement, errorElement, strMessage) {
            if (inputElement) {
                inputElement.classList.add('input_validation_error');
                inputElement.classList.remove('input_validation_success');
            }
            if (errorElement) {
                errorElement.textContent = strMessage;
                errorElement.style.display = 'block';
            }
        }

        /**
         * Validation Success Display Function
         * Purpose: Shows validation success for specific field
         * @param {HTMLElement} inputElement - Input field element
         * @param {HTMLElement} errorElement - Error message element
         */
        function showValidationSuccess(inputElement, errorElement) {
            if (inputElement) {
                inputElement.classList.add('input_validation_success');
                inputElement.classList.remove('input_validation_error');
            }
            if (errorElement) {
                errorElement.style.display = 'none';
            }
        }

        /**
         * Form Validation Setup Function
         * ==============================
         * Purpose: Initialize all form validation handlers
         */
        function setupRegistrationValidation() {
            // Name field validation
            if (txtUserName) {
                txtUserName.addEventListener('blur', function() {
                    const objValidation = validateUserName(this.value);
                    if (!objValidation.isValid) {
                        showValidationError(this, spanNameError, objValidation.message);
                    } else {
                        showValidationSuccess(this, spanNameError);
                    }
                });

                // Real-time validation on input
                txtUserName.addEventListener('input', function() {
                    if (this.value.trim().length > 0) {
                        const objValidation = validateUserName(this.value);
                        if (objValidation.isValid) {
                            showValidationSuccess(this, spanNameError);
                        }
                    }
                });
            }

            // Email field validation
            if (txtUserEmail) {
                txtUserEmail.addEventListener('blur', function() {
                    const objValidation = validateUserEmail(this.value);
                    if (!objValidation.isValid) {
                        showValidationError(this, spanEmailError, objValidation.message);
                    } else {
                        showValidationSuccess(this, spanEmailError);
                    }
                });

                // Real-time validation on input
                txtUserEmail.addEventListener('input', function() {
                    if (this.value.trim().length > 0) {
                        const objValidation = validateUserEmail(this.value);
                        if (objValidation.isValid) {
                            showValidationSuccess(this, spanEmailError);
                        }
                    }
                });
            }

            // Password field validation
            if (pwdUserPassword) {
                pwdUserPassword.addEventListener('blur', function() {
                    const objValidation = validateUserPassword(this.value);
                    if (!objValidation.isValid) {
                        showValidationError(this, spanPasswordError, objValidation.message);
                    } else {
                        showValidationSuccess(this, spanPasswordError);
                    }
                });

                // Real-time validation on input
                pwdUserPassword.addEventListener('input', function() {
                    if (this.value.length > 0) {
                        const objValidation = validateUserPassword(this.value);
                        if (objValidation.isValid) {
                            showValidationSuccess(this, spanPasswordError);
                        }
                    }
                });
            }
        }

        /**
         * Form Submission Validation Function
         * ===================================
         * Purpose: Validates entire form before submission
         * @returns {boolean} True if form is valid for submission
         */
        function validateFormSubmission() {
            let blnIsValid = true;

            // Validate all fields
            const objNameValidation = validateUserName(txtUserName ? txtUserName.value : '');
            const objEmailValidation = validateUserEmail(txtUserEmail ? txtUserEmail.value : '');
            const objPasswordValidation = validateUserPassword(pwdUserPassword ? pwdUserPassword.value : '');

            // Show errors for invalid fields
            if (!objNameValidation.isValid) {
                showValidationError(txtUserName, spanNameError, objNameValidation.message);
                blnIsValid = false;
            }

            if (!objEmailValidation.isValid) {
                showValidationError(txtUserEmail, spanEmailError, objEmailValidation.message);
                blnIsValid = false;
            }

            if (!objPasswordValidation.isValid) {
                showValidationError(pwdUserPassword, spanPasswordError, objPasswordValidation.message);
                blnIsValid = false;
            }

            return blnIsValid;
        }

        /**
         * Form Submission Handler
         * ======================
         * Purpose: Handles form submission with validation
         */
        if (frmRegistration) {
            frmRegistration.addEventListener('submit', function(eventObject) {
                // Validate form before submission
                if (!validateFormSubmission()) {
                    eventObject.preventDefault();
                    return false;
                }

                // Add loading state to button
                if (btnRegisterUser) {
                    btnRegisterUser.classList.add('btn_loading');
                    btnRegisterUser.textContent = 'REGISTERING...';
                }
            });
        }

        // Initialize validation on page load
        document.addEventListener('DOMContentLoaded', function() {
            setupRegistrationValidation();
        });
    </script>
</body>
</html>
